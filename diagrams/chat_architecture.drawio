<mxfile host="65bd71144e">
    <diagram id="xBRdnPSFUyk9Mn80xkOD" name="Chat">
        <mxGraphModel dx="1864" dy="1446" grid="0" gridSize="10" guides="0" tooltips="1" connect="1" arrows="1" fold="1" page="0" pageScale="1" pageWidth="827" pageHeight="583" math="0" shadow="0">
            <root>
                <mxCell id="0"/>
                <mxCell id="1" parent="0"/>
                <mxCell id="26" value="" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=light-dark(#000000,#FFFF33);" vertex="1" parent="1">
                    <mxGeometry x="-90" y="-323" width="605" height="554" as="geometry"/>
                </mxCell>
                <mxCell id="53" value="" style="group" vertex="1" connectable="0" parent="1">
                    <mxGeometry x="-271" y="229" width="310" height="170" as="geometry"/>
                </mxCell>
                <mxCell id="42" value="" style="rounded=0;whiteSpace=wrap;html=1;strokeColor=light-dark(#000000,#FFFFFF);fillColor=light-dark(#FFFFFF,#190033);" vertex="1" parent="53">
                    <mxGeometry width="310" height="170" as="geometry"/>
                </mxCell>
                <mxCell id="43" value="&lt;font style=&quot;font-size: 14px;&quot;&gt;Msg Structure&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="53">
                    <mxGeometry x="118" y="4" width="92" height="18" as="geometry"/>
                </mxCell>
                <mxCell id="46" value="&lt;ul&gt;&lt;li&gt;msg: Text&lt;/li&gt;&lt;li&gt;multimedia: ?StorageLocation&lt;/li&gt;&lt;li&gt;date: Int&lt;/li&gt;&lt;li&gt;sender: Nat //Sender index in Participants Array&lt;/li&gt;&lt;li&gt;indexMsg: Nat&lt;/li&gt;&lt;li&gt;read: Bool&lt;/li&gt;&lt;/ul&gt;" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="53">
                    <mxGeometry y="29" width="300" height="130" as="geometry"/>
                </mxCell>
                <mxCell id="2" value="&lt;div&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;Chat Storage&lt;/font&gt;&lt;/div&gt;HashMap&amp;lt;ChatId, Chat&amp;gt;" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=light-dark(#000000,#FFFFFF);fillColor=light-dark(#FFFFFF,#4C0099);" parent="1" vertex="1">
                    <mxGeometry x="-78" y="35" width="160" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="14" style="edgeStyle=none;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="3" target="4">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="3" value="Managing Chat Access Permissions" style="rounded=1;whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#003300);" parent="1" vertex="1">
                    <mxGeometry x="-71" y="-98" width="200" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="15" style="edgeStyle=none;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="4" target="2">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="4" value="Read/Write in Chat" style="rounded=1;whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#000099);" parent="1" vertex="1">
                    <mxGeometry x="-54" y="-24" width="120" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="25" style="edgeStyle=none;html=1;exitX=1;exitY=0.25;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeColor=light-dark(#000000,#FFFFFF);" edge="1" parent="1" source="5" target="24">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="5" value="&lt;font style=&quot;font-size: 24px;&quot;&gt;Main Canister&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=light-dark(#000000,#FFFFFF);fillColor=light-dark(#FFFFFF,#003300);" vertex="1" parent="1">
                    <mxGeometry x="-408" y="-199" width="197" height="117" as="geometry"/>
                </mxCell>
                <mxCell id="50" style="edgeStyle=none;html=1;entryX=0;entryY=0.75;entryDx=0;entryDy=0;" edge="1" parent="1" source="6" target="5">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="-686" y="-83" as="sourcePoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="51" value="&amp;nbsp;User Registry&amp;nbsp;&amp;nbsp;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="50">
                    <mxGeometry x="0.0694" y="-3" relative="1" as="geometry">
                        <mxPoint y="-4" as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="6" value="New User" style="shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;outlineConnect=0;strokeColor=light-dark(#000000,#FFFF99);" vertex="1" parent="1">
                    <mxGeometry x="-560" y="-141" width="30" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="9" value="" style="endArrow=classic;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0.25;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="24" target="16">
                    <mxGeometry width="50" height="50" relative="1" as="geometry">
                        <mxPoint x="-40" y="-53" as="sourcePoint"/>
                        <mxPoint x="50" y="-203" as="targetPoint"/>
                        <Array as="points">
                            <mxPoint x="240" y="-220"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="11" value="Registered User" style="shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;outlineConnect=0;strokeColor=light-dark(#000000,#FF9999);" vertex="1" parent="1">
                    <mxGeometry x="-476" y="-29" width="30" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="12" value="" style="endArrow=classic;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="11" target="3">
                    <mxGeometry width="50" height="50" relative="1" as="geometry">
                        <mxPoint x="40" y="-63" as="sourcePoint"/>
                        <mxPoint x="10" y="-93" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="13" value="Send Msg to other User&amp;nbsp;&lt;div&gt;or Users group&amp;nbsp;&lt;/div&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="12">
                    <mxGeometry x="-0.0688" y="1" relative="1" as="geometry">
                        <mxPoint x="1" as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="16" value="User Storage&lt;div&gt;HashMap&amp;lt;Principal, Name&amp;gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#331A00);" vertex="1" parent="1">
                    <mxGeometry x="211" y="-170" width="166" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="20" value="" style="endArrow=classic;startArrow=classic;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0.25;entryY=1;entryDx=0;entryDy=0;" edge="1" parent="1" source="3" target="16">
                    <mxGeometry width="50" height="50" relative="1" as="geometry">
                        <mxPoint x="260" y="-50" as="sourcePoint"/>
                        <mxPoint x="310" y="-100" as="targetPoint"/>
                        <Array as="points">
                            <mxPoint x="220" y="-78"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="23" style="edgeStyle=none;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="21" target="16">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="21" value="Periodic Syncronization" style="rounded=1;whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#33001A);" vertex="1" parent="1">
                    <mxGeometry x="-50" y="-170" width="200" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="22" value="" style="endArrow=classic;html=1;exitX=1;exitY=0.75;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeColor=light-dark(#000000,#FFFFFF);" edge="1" parent="1" source="5" target="21">
                    <mxGeometry width="50" height="50" relative="1" as="geometry">
                        <mxPoint x="190" y="-60" as="sourcePoint"/>
                        <mxPoint x="240" y="-110" as="targetPoint"/>
                        <Array as="points">
                            <mxPoint x="-120" y="-147"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="24" value="addUser to&lt;div&gt;Chat Canister Registry&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#33001A);" vertex="1" parent="1">
                    <mxGeometry x="-51" y="-241" width="200" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="27" value="&lt;font style=&quot;font-size: 24px;&quot;&gt;Chat Canister&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
                    <mxGeometry x="57.5" y="-303" width="275" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="28" value="Chat ID Calculator&lt;div&gt;([Principal], Scope) -&amp;gt; ID&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#000066);" vertex="1" parent="1">
                    <mxGeometry x="124" y="-23" width="155" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="29" value="&lt;ol&gt;&lt;li style=&quot;text-align: left;&quot;&gt;Sort Principals&lt;/li&gt;&lt;li style=&quot;text-align: left;&quot;&gt;Principals to Text&lt;/li&gt;&lt;li style=&quot;text-align: left;&quot;&gt;Concatenation&amp;nbsp;&lt;/li&gt;&lt;li style=&quot;text-align: left;&quot;&gt;Concatenation of Scope&lt;/li&gt;&lt;li style=&quot;text-align: left;&quot;&gt;Hash(TextConcatened)&lt;/li&gt;&lt;/ol&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="shape=process;whiteSpace=wrap;html=1;backgroundOutline=1;fillColor=light-dark(#FFFFFF,#000033);" vertex="1" parent="1">
                    <mxGeometry x="320" y="-101" width="208" height="140" as="geometry"/>
                </mxCell>
                <mxCell id="32" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;exitX=0;exitY=1;exitDx=0;exitDy=0;entryX=1;entryY=1;entryDx=0;entryDy=0;" edge="1" parent="1" source="29" target="28">
                    <mxGeometry width="50" height="50" relative="1" as="geometry">
                        <mxPoint x="350" y="57" as="sourcePoint"/>
                        <mxPoint x="400" y="7" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="33" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;entryX=0;entryY=0;entryDx=0;entryDy=0;exitX=1;exitY=0;exitDx=0;exitDy=0;" edge="1" parent="1" source="28" target="29">
                    <mxGeometry width="50" height="50" relative="1" as="geometry">
                        <mxPoint x="350" y="57" as="sourcePoint"/>
                        <mxPoint x="400" y="7" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="34" value="" style="endArrow=classic;startArrow=classic;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="4" target="28">
                    <mxGeometry width="50" height="50" relative="1" as="geometry">
                        <mxPoint x="410" y="37" as="sourcePoint"/>
                        <mxPoint x="200" y="-3" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="37" value="&lt;font style=&quot;font-size: 36px;&quot;&gt;Chat canister / Main Canister interaction&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=1;fillColor=light-dark(#FFFFFF,#000033);strokeColor=light-dark(#000000,#FFFFFF);arcSize=30;" vertex="1" parent="1">
                    <mxGeometry x="-552" y="-325" width="486" height="107" as="geometry"/>
                </mxCell>
                <mxCell id="52" value="" style="group" vertex="1" connectable="0" parent="1">
                    <mxGeometry x="-183" y="146" width="262" height="74" as="geometry"/>
                </mxCell>
                <mxCell id="38" value="" style="rounded=0;whiteSpace=wrap;html=1;strokeColor=light-dark(#000000,#FFFFFF);fillColor=light-dark(#FFFFFF,#330066);" vertex="1" parent="52">
                    <mxGeometry width="262" height="74" as="geometry"/>
                </mxCell>
                <mxCell id="39" value="&lt;font style=&quot;font-size: 14px;&quot;&gt;Chat Structure&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="52">
                    <mxGeometry x="86.66153846153846" width="96.73846153846152" height="18.08888888888889" as="geometry"/>
                </mxCell>
                <mxCell id="40" value="&lt;ul&gt;&lt;li&gt;Participats: [(Principal, Text, ?Blob)]&lt;/li&gt;&lt;li&gt;Msg: List.List&amp;lt;Msg&amp;gt;&lt;/li&gt;&lt;/ul&gt;" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="52">
                    <mxGeometry y="26.997777777777777" width="262" height="35.355555555555554" as="geometry"/>
                </mxCell>
                <mxCell id="339" value="" style="endArrow=classic;html=1;entryX=0.75;entryY=0;entryDx=0;entryDy=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;strokeColor=light-dark(#000000,#FFFF33);" edge="1" parent="1" source="40" target="43">
                    <mxGeometry width="50" height="50" relative="1" as="geometry">
                        <mxPoint x="180" y="220" as="sourcePoint"/>
                        <mxPoint x="255" y="175" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="341" value="" style="endArrow=classic;html=1;" edge="1" parent="1" target="342">
                    <mxGeometry width="50" height="50" relative="1" as="geometry">
                        <mxPoint x="-63" y="294" as="sourcePoint"/>
                        <mxPoint x="127" y="274" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="340" value="" style="endArrow=classic;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;strokeColor=light-dark(#000000,#FFFF33);exitX=0.737;exitY=0.7;exitDx=0;exitDy=0;exitPerimeter=0;" edge="1" parent="1" source="2" target="39">
                    <mxGeometry width="50" height="50" relative="1" as="geometry">
                        <mxPoint x="-194" y="133" as="sourcePoint"/>
                        <mxPoint x="-98.4" y="160.37777777777777" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="342" value="&lt;div&gt;StorageLocation structure&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;{ bucket: Principal; index: Nat }" style="rounded=0;whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#003300);" vertex="1" parent="1">
                    <mxGeometry x="54" y="229" width="191" height="66" as="geometry"/>
                </mxCell>
                <mxCell id="358" value="" style="group" vertex="1" connectable="0" parent="1">
                    <mxGeometry x="314" y="61" width="340" height="286" as="geometry"/>
                </mxCell>
                <mxCell id="344" value="Buket Factory Module&lt;div&gt;Automatic bucket canister class deployment and manage.&lt;br&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#1A1A1A);" vertex="1" parent="358">
                    <mxGeometry x="8" y="13" width="182" height="91" as="geometry"/>
                </mxCell>
                <mxCell id="345" value="File Storage" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;" vertex="1" parent="358">
                    <mxGeometry x="172" y="149" width="72" height="85" as="geometry"/>
                </mxCell>
                <mxCell id="346" value="File Storage" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;" vertex="1" parent="358">
                    <mxGeometry x="145" y="172" width="72" height="85" as="geometry"/>
                </mxCell>
                <mxCell id="347" value="File Storage" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;" vertex="1" parent="358">
                    <mxGeometry x="217" y="191" width="72" height="85" as="geometry"/>
                </mxCell>
                <mxCell id="349" value="&lt;b&gt;Buckets Canister class&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=1;strokeColor=light-dark(transparent,#4D4D4D);fillColor=light-dark(transparent,#1A1A1A);" vertex="1" parent="358">
                    <mxGeometry x="164" y="127" width="164" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="348" value="" style="endArrow=classic;html=1;exitX=0.75;exitY=1;exitDx=0;exitDy=0;entryX=0.405;entryY=-0.002;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="358" source="344" target="346">
                    <mxGeometry width="50" height="50" relative="1" as="geometry">
                        <mxPoint x="120" y="77" as="sourcePoint"/>
                        <mxPoint x="170" y="27" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="356" value="" style="group" vertex="1" connectable="0" parent="358">
                    <mxGeometry width="340" height="286" as="geometry"/>
                </mxCell>
                <mxCell id="352" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;exitX=0;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="356">
                    <mxGeometry width="50" height="50" relative="1" as="geometry">
                        <mxPoint y="280" as="sourcePoint"/>
                        <mxPoint as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="353" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;exitX=1;exitY=1;exitDx=0;exitDy=0;entryX=1;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="356">
                    <mxGeometry width="50" height="50" relative="1" as="geometry">
                        <mxPoint x="340" y="281" as="sourcePoint"/>
                        <mxPoint x="340" y="1" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="354" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;" edge="1" parent="356">
                    <mxGeometry width="50" height="50" relative="1" as="geometry">
                        <mxPoint x="4" y="286" as="sourcePoint"/>
                        <mxPoint x="338" y="284" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="355" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;" edge="1" parent="356">
                    <mxGeometry width="50" height="50" relative="1" as="geometry">
                        <mxPoint x="5" y="2" as="sourcePoint"/>
                        <mxPoint x="339" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="357" value="&lt;font style=&quot;font-size: 24px;&quot;&gt;ToDo&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="356">
                    <mxGeometry x="29" y="199" width="74" height="41" as="geometry"/>
                </mxCell>
                <mxCell id="359" value="Notifications&lt;br&gt;&lt;div&gt;HashMap&amp;lt;Principal, Notification&amp;gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#333300);" vertex="1" parent="1">
                    <mxGeometry x="90" y="110" width="204" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="360" value="" style="endArrow=classic;html=1;exitX=1;exitY=1;exitDx=0;exitDy=0;entryX=0.25;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="4" target="359">
                    <mxGeometry width="50" height="50" relative="1" as="geometry">
                        <mxPoint x="150" y="105" as="sourcePoint"/>
                        <mxPoint x="200" y="55" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="361" value="User Loged" style="shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;outlineConnect=0;" vertex="1" parent="1">
                    <mxGeometry x="-440" y="99" width="30" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="362" value="" style="endArrow=classic;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="361" target="359">
                    <mxGeometry width="50" height="50" relative="1" as="geometry">
                        <mxPoint x="106" y="123" as="sourcePoint"/>
                        <mxPoint x="156" y="73" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="363" value="&amp;nbsp;Pulling Notifications&amp;nbsp;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="362">
                    <mxGeometry x="-0.5818" y="2" relative="1" as="geometry">
                        <mxPoint as="offset"/>
                    </mxGeometry>
                </mxCell>
            </root>
        </mxGraphModel>
    </diagram>
</mxfile>